language: ruby

rvm:
- 2.1

sudo: false

env:
  global:
  - secure: Z3te/ZxIUaNtB1GQ5GqcmhIqX/ctfKyEqFRGAKkSYGLnq0nc47NJTAX3CrIKXIZLYZ6kSeYpd+92JIt1ySJbugqB/f1Dc63tryGADOPOaUgzqeetkzpADOaPACMsZIxSTmV/EOKm6THZ8CPeYtWv0fseMn9+xQsOy77ac2SL7+38ijKEdR3zWS7/gznUZYubjvFaRC7ONyRM6lDDTIieHMdsTRaYkYHt++UIpRVHFjDo2YEQvcpLg2BCUvLT4EyFzWn9MoLCpGDIU4fIgwILs207hdj8cSqSf6QNmFj6i4XUrm0yUtsSGnyH3krLYoiMz8qhx7d2NoF5CDU+kFoyqRcMfUV7od+ssoNuoQHV+NuH6Im/haq7JgzoT/qwyrJcupZTdrzS+nEQTHGNmDOMDqXKQqt+VqnlC3c5uwHT2v5NVGb57XwVMFCP04aYQAUQ8k9AFGAvN2qPaeXdPTjh9/cicRoSUHqUHKAynf4bPBATPSJ33bARttJ5g27WFjf6HNphgPeF24Vbw72nbEE3jzVa5MC8ym0ag5qMEPhBEHD9EuXJ/AyHaM+bM7gSCgnE6YMsxryqF3jSqEuCnebHtGwIZJmNcMS8N+M2HoD8pnwL/ripHUEXlaT8tnfb93c/x+e2FHv1dRe2Eimi3p25B0/X4T2+5SkBdMVyJTbaQqg=
  - secure: e/c4LOP+lZUeZsBEX8mw5WUZ8ByN+hq4n53DYqrV9WHUTlJL1D0DpKmPYk17X1i0l8WnQctin3sLW2UUcr4OpN3NRZzn/TBKFTThHNGrge1NSBHlGcoNQeLW29HuKOvwVsIPJp2BIp1TA82Totl6+wCSVkjyfb7uW835hXI7oYPi86OQDbDA8YTsrta2QXZ/Z1AfAPeeDl9Tuzd5gDGXF+B3XObfKUlBH19GClisWucAD8cw1tWsN4qq5nYQKKM1+f9rkzcb/EPTyr3XpYplr7Sjq6O70w/9I62jlv/7bHjUJI5ewLu/9nRbHTceau5P8uNxVz07uexULTBBPyMLvvO7StTm1SRmk6vJu0H1Vs7fk/ve9SyxE5FfyXYLQZl83AUKmzuLO4SJfD3+aiuVqdNe5/lMRz/P0vlfpvRr/4Mf7aTjqt2kJl8JNxEJzothOsCNO03e/pKWPvGFUAmk/0ILlANHxxuCf0w3hRGSAGGaGzn4IssmFoj+zLfPJEiO67VI1OGI7yjBm8s4urRTYpNodu06DQSBMdHgrtBnwPEdt+CA5mzRKTaXCVIxi+f0eE8cVoxiABBvEnNUVMWxU5byEN3KQ3+E0u75K8AuOct1B7BCq5cbHhkmEa25qXLzu1oA9tdNK/JmxuFUO6N6VIcfdWH1qP5y0fWsIR9kpH8=
  - secure: hlAsmRA3MSnxIsxiTOvhgc0Djv7rH9KQeAznfoMKfMdF55uk1uZHr8rRbSqNrc7bp+NfG9bgmvz4zBALmD2+dcOkF74tQmUhdKBxkwf6GemdrgOULahme4UsmBpFIZIcwSpGblvdAFwjer5Dif/NCF8xlYnWyp+q0yANDNgrn4qoQdOdkhRy4k5iAz0vLr5XkVN4uzDqV0K8dllbKvw2KKmm2bQxA0AnCM/TzCk/wGLp7khVsfI2OkNLo+QK0Fhe2mvI2yO0Dw4LrEuwcLR5S4x08CpUQpwEoTxeNbT6WFMjSWLDskVRsY3uPqpUYC6wHol3KDK1paC8ziT4Jlp6q5a22VqxcCMAKRgAFExnGVfPMZnQn16o4muG3MEk5AADYT3waEJhcIkqTE/3YbH3EcGIEHhI3d4yg2FUEfxu4x1yffspg8PnyHOH3m8JCNTtA3vVEG/MPDphhGzD+/ODjAyO6KiYEPRFYcZHr/GPLX9VstDdsOZ0d8Vw577NBanJxhHzzsZm7C8FVYns3KqcVJtU6wO55Z1dOGHwGHq49Zskb0GBmTjctekykMPCnGi5TqyhKSWD4kYUh3TQcBZn0jdM7XFJ4aBhSNS0ypGiILABVp8xxex5WkeuLsbsqzimzFOH/DZ5aHd5UuMpAkPNjWICC8rptBzTC3pC1fo/N4Q=
  - secure: GNSMQlxSdGbalFUatJQr1xPYmpy7OVzORePB1VENjTKFAJ7Ib30o8V2BPxgMiIExJB3tQn/i4kHS/ftktHm8Vu2pPGsRQjNyuclySOY8XBx/nSEg2LFyXQO7xXJgpyy2wov7skxt7A2sWpshI2Bp15AQ+vuG6sPS+4qrOmqByhCdsBoLwOj3MNbaPUhPELvk0hRb/iMSArMIXxMdrwubqS9Zkd8ChQzul4uq8b9L5QKgHdeaDrQFXQha5gUp8BetebPECkAJesIrp9cqqvyqDVBLIy1QQc70496hVfuLSpl0+Bf8jCyycIGI3gt3+ASMq2LCuWIgQgM0cqJmEQmSPC8aztukzmK5Fruyu/kQKSV1eWuuDG/jSa/lIqcNoh/t73PpQdEZpeFXh/ws/r3awW3NqWOkIiU1GLHeA/hFlvlKNBNl48o3LTBgF3rFZnMfvbdpS94CaB4xIVFKZYNxadfVlS10TQEq3r/jpHcpDZynC3rWovcCKyO8FpvJg17xSieVU6IOPY/VZ2/fxQHC2uXmP9ocF2vOxxuRngs2lqK/Ft08/5+NoHSRLVfFk+SZ22H5dxcE2U/Mj6cHYPe7/pGbdKeTIwyw5cYptvR6e9y5LYFcqabtUsKogcakF0eSZX6yTArwBN5ZZOL0mcFZvOPY2ZXS2FNivcpXLoOwTFU=
  - secure: ZeP1SWBsVSFv4OO2oTXfjA4LIrSiCOl7n5FZvSeqBr5k1JEH3ssp9ds62dRSxsZvTM8xIQ3yMgrStKuxYZABTEdI1YFJpDtEaFThyyo4GjIZuXIkUxp9Pilm8CB2hUjzhh6Y2RDLw525SCgGPIHNwUNGxKYcgPK18OE1GkA8SVf2XI3cLl9YRAayvQ+ugcPkQV6YAgf8+Tc8M4SB242jJXAfj25K8tp3fhKhT2N9mdOTTfXI6Z65nDHs+D6LBbfmd1tk4e3f+F9+fhLGs4xRoAKOFxhWYLzZPYEn4FCYkDZw+p9s441jyTeqMrfHUu4a4Gk5tdI4e5Qlu8dtJtc0hElDaKJyRDt65O4hkDnvamx5L8aeHA4ZQwiR4LAO5K/iVZ0a7MbA4liQrlFBfeNb0e3YKfJtphyqCyNnbJM3KJQjEtj8duDbcnukkoqCFQU4Zb1b+OZBttiMYy4aadM6s35nGhmyCb7El3M/JIbkSFeISb02VHzA1xe9kQLj1uXtuiX7X/kbNAeTm+iDG5qA62+dnyWYMFKe9hKnLmAbZf0hdmrK/ebkQPcYKajCoA2mWJIEmTWRBn1Rwg5NSXUXi+GX5mPb0dBMaX3yCQy/F0XyuT0Uow9DYGVdYNkvyL6uebzcruZO0CSkHzbzWe4teoArk3i+Fr2jdtu9d70XTWQ=

addons:
  apt:
    packages:
    - sshpass

before_script:
- bundle install

script: bundle exec jekyll build --config _prod-config.yml

after_success:
- mv _site design-system
- design-system --touch
- tar -cmzf package.tgz design-system
- test $TRAVIS_PULL_REQUEST == "false" && test $TRAVIS_BRANCH == "staging" && export SSHPASS=$DEPLOY_PASS
- test $TRAVIS_PULL_REQUEST == "false" && test $TRAVIS_BRANCH == "staging" && sshpass -e scp -o StrictHostKeyChecking=no package.tgz $DEPLOY_USER@$DEPLOY_STAGING_HOST:$DEPLOY_PATH
- test $TRAVIS_PULL_REQUEST == "false" && test $TRAVIS_BRANCH == "staging" && sshpass -e ssh $DEPLOY_USER@$DEPLOY_STAGING_HOST $DEPLOY_PATH/deploy-design-system.sh
- test $TRAVIS_PULL_REQUEST == "false" && test $TRAVIS_BRANCH == "master" && export SSHPASS=$DEPLOY_PASS
- test $TRAVIS_PULL_REQUEST == "false" && test $TRAVIS_BRANCH == "master" && sshpass -e scp -o StrictHostKeyChecking=no package.tgz $DEPLOY_USER@$DEPLOY_PROD_HOST:$DEPLOY_PATH
- test $TRAVIS_PULL_REQUEST == "false" && test $TRAVIS_BRANCH == "master" && sshpass -e ssh $DEPLOY_USER@$DEPLOY_PROD_HOST $DEPLOY_PATH/deploy-design-system.sh

notifications:
  slack:
    secure: pnmMkbxQt0rbioJRwL64lGEoryRqWDH0If4oCssVAP6+k+5h3CDMCeINpfkFhG3Oqro0pKVQnFjiXhDGTInFGX2cTjNm6khyOb0E4q1uRbEBJ2P4xWrfnLcjwq8JTszB1P78yXB/NkuWK2ZmTXWjFYw0FtLOgklvNzjARzxGQEzBn6LrcTmWGy/fxq2E0GdGNQ6xPFJt0Eof9+6Z7aoFUGpobZWHneqrR0yGSPO/CLLxB88jWOuMQLwrgGg3Ua/u/HLgNpdq6h5RhVh25PGZa+MB9pdXRRqbR5FuTIA5uxmG0lAemlcynonPDOvh1bUGKh0z0bhUJC54Nufe+pib2s2ySll+R/rHYdqp6qJ9p6VuMjwezdMq8OAmFKPzsA5isVj1MTW4qxja5zfsIWeRE558kHSvlTxu0MwUqdfM8CuBppUfJZ7QQ1lGpaeLsfJfHxbJbvUi6XeNnf+ffoYsCTKKfxA0JzcReLC5cq25nqMxC/dEEH4RY3VC519tdjjZDc+fYA8e2pO6QUbdXsUnnwOXBleKt1n556c7MWguAcaCwnifJrSFHC8GVPX4L61Ta75ul8TcuNQIMkY5DAgsUYg5+OnWfM2bu1p8kiGc8TthVtezJe5AfXxoLQBZQQdtX/uovCVZiUjaafpmapNGcMwhHIDmbPWwM7JdQgs8eH4=
