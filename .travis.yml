language: ruby
rvm:
- 2.1

sudo: false

env:
  global:
  - secure: oNLUTidrQ5pshFzL3xX7xj84lSkH9fEZa3kSbkbxFfLOtIuLfVo7rodizzgb7geBiL7yftfHaEba74SvgTnLhAAuFCo/2EJJLuX5y4+jauEr+OB2HwNIMYuUZONIFUxM7UXRiEv7tB7FaSCGghb1gz+SuiyuvaQjVnXdmVWZ1xhqrouGfG20cDXuPgq5GUpqyFrGxDYJf8AFj2d12Y49CRZTaG8s5qnHNow25h5VDkmS1Fv6BqOX5w6Pzaq2wExjjDO/x31TY3XpCrn+77VD6wwurhqyIzzDCEa6SIMox/BC7t6rQ6oIy39tjnU93f2/yJ3apnwBDK2xt0/zetJXjqqCs5uYOajiKgZl2YdwWSTOM6zKwCrOG8ArdFdxYV7bG9el9LmBDcqZQKSEGvmYW0UoorO7aOxVz/mWjmJmd+ddKQxjZFiCkRDSlm5X6CyO/7bW0VCI7cH6xOn+R5dlAEqbCsfzoeOmzj+u4V9v6x7jK2JMA7PFwD0YzPIv03llhVcIYAeGcCWXWeQ7y3goBJ7QzcXbaA/eLhe5Y6PPpoXCRHWz3MMZb59aOIX1t/oHQj6+xLe/cBQkmUquI8a3qAr00/adKtTYk74lTRRK4dFbr0AxAZpE+5dDOtc3zkAYivO3aVGHCaJsjMWhtYEffIm7iduI7+YGzNQpSbjRyWE=
  - secure: s2JaUW6v2IjXiTMMS57Ly5u/5l1/elnAHjXNcSZVjrvO48HIzo5lBaXbDSQntY5ZN4HQSlVwH/cgazrHwf1yyfJht+PsGtBXfmDq1IfONNtqLoOOAeqcNHVqoGMkguk/drF189XYhCZwquq0VMwGdfzZwquKwMGhS/6srmoCn0hMO8p5MZIqLB5335fvqJDQecwn1gcg48rl8hegUfMHAxCH47fSqnt4HcXa2stn0JyQS7AvK9pusfaCpJiP6yQgeIVCiQR0Zs6TkjXWbhQSnkyacJDLtfgOghs4MM3uf22EDM3ty81MUjp6vkmgPQwZolGXXhpiW21LCFEqb4DuL2lDtlMJ0vvpIdMAeNvUlQH9auYgf5IZSN8WcTyx39iNVr0+d4JwkF49nIjZbLGVUVMN46QRmbCbvj6zyqARkQf5KUl/zl3p14RabExwHMLxmMdY0sAYCSSUHoPvA8BX/Rxy+ZYkLxe3c3RMUAdiqjnxuee2MxQ9NeTIYJQOo5mkXRbUfDDOwe06x0NUopg0zrZAbPdo2EF4TE59J9jNcBm2BC5AH2ZfPmFhcOeM8sXZfxAdmsEWhhmA7Edo0Kmq5XNv6Niaw7YCYa5tqGdLVWoG2CG4hy/G56BZaW91UYGdRb6Ylk4B1JPogUfF2NRtxOjWSUq2AMgdluH4ilpqJJY=
  - secure: QyFLI6ftw+uRFE4325+U8srksfqcyyCOObqeVRNsCqfaOCHmVqqa9kJZJpfeYfqDjng01FaT6/jQWzOsNqgdbDfMnQ9JekvIqMrd35y5oHvZiNLRq5xwlpKd1NlgWEae6gGgUOqQsCtSOVjVLyF9pN1STu5NMVXSrFhf1FSXsYK7DDxbPx7sB85MFOYvt7L77X0qMI60PsViAqxqb0goGs+R75kRsKEj5NwmtZ9zJsyA4rDRO9mCFoRITJYifDMqRSER360LyTvTc8NJ/Z7XKOg+1J4ePPU+Ggwx9t/UGL3qUwG4WW1DVO92ob+K+gAUOovqikVqkH6Mk9VHHiHHbkHJja3tcx2JA2anSb6y8fySmgeI7PyGTLmGBTV2sKf7jKm+JdWE0tlrYwM70afYF7N3wOdsF92rR6TxkNf77HDerT2qxh8vn/7+gmB2P019Z3oYrFJR7hN970+r84UrtltqYZeiIFzYW2heMgGtjbFVAOM7FMTho2ymMcWj7NtJ1A4ojZvCpWzXTNF++r6DdBeZg0XuqhecMsU5k2gdUa+DdHcRSjNa/Owv2CLQSdqCxOGjukza9Kx2Sk+DKdEm4jtnGZkDozjXy3J5zt7ElaLM5FHlWvhczMtvJEaFOOuJGDxmPH+3XWkg1u9YpdAohpo3NgECEIxE11dEyJo8JyM=
  - secure: IfT7Ixg0IRS0P3qk3DQs4bPp/QrRO786PqdpB/DkcxYldgAwGXRcnWDTHVqvHUbNyPuJGX8iSsyjLlqhd89XOVQ7rWCPkAKE9cYweGmwVJ/RYAC6qrZ0UbVntoJEzXPtsz1bpk+K7ciMA1KPHldb4cibrUx+jfKDaye+pRBiXxqBPlTB/yC/QbPc2AzIV8omDN4EV9AnZoGn+N2I6eXgtcM2ejDW4GUps9xChI0+Pyz/zC00vXowtc62yOL5+Gwjivh9bri704fhxfzUpjQB6Sueg+yuj/k2dxGFITFebGmWByJwRldX2EIAgr11JUwWGhEshCpUOIB425hB4xXZcOnGzhn3EkxlbrQ7Z9ttSGJIhgeIqogsVG5MI9Ad5MEiVUKdSh77YYMcja8ducGAbiRNyf92dIkjVPakZIryUZlnvvnX2J5oSU+erfAgcCuozG2lI5THNp79klqRqoFF/WMKuI7d+rGRN/qT13nMcvusoLtgwa07m7UJrDatQabtcQwrF6oaW9S7wUi+Q+ComQYL/3ZelUf4rvu4rZxbMADrUl3og1leQdY9oi0GOJk7yFkx2Kr7jSVwb+dTdSpbsT7qcK9WoN3ME8SmTAp7aGyjmezDmb67h8zvZZGKZi3wx3ZM0FaWFoJeppRymNkGBN3NJPjiaX4OEjFyjc+Ap/4=
  - secure: XMTKy3K0lZOd9h9jgZDXtcLM2yyu5CBRIZxrMc1Qh1thLcWXHGIdahzAtxRttwy/73NZfldqvCzNpulUWhdpHqdMTaXQGXuH/FEjTt+AD0Plml7w7NvqOEDYfk4p+Mk63r3H6d5pBc2cqykhLCql0okcmSlHM18Ozup/A/whrbSXnf2wXcrSV7DIJf8tzYYdqiB3N5C1Buv0k9nZhmFj+jk9gCTkjuEjPCYJCOCuqzEA8piMV9ExuqRsWB65Ep9wPicocWLIXjbLTrH3rmx+yrYaWwcz0umTLjWW0WjKf349Yovf6Eespt10NG190Yx4nNdd0JphDkZTuELWEm39xr5872MGhqDn37eIEGbmGJW3dUBZw7Dj2JCfxdLN/ZiRpEEvwsS4LfU2w7ftMz5njiP1NCdX7IN+DhwN+/3ORFByxjqo/7hT6V2KgphcpFEAcbRlSkoZgvlUUA1vmzJ7kPoNTD7OGJS0e0CMTglHfCivTuN0uEaiw47tlYuPyVDNOJ83wdQXtWn3u6hlorHfotBZgaghXrKpFZX/h7aJZmqlQKZiwrIOpUTeCZjpc2Vq707KCLLZR3JGUKC3Z1y7ZBZ0Vmw/Z4TMUyMp1JRPy96glck4c91hOx4g3nnoTrcmY46wI///LMWe7P4O7XEk2mumBLBFIVAsjSCD3qQNxfE=

addons:
  apt:
    packages:
    - sshpass

before_script:
- bundle install
- chmod +x ./script/cibuild

script: ./script/cibuild

after_success:
- mv _site design-system
- tar -czf package.tgz design-system 
- test $TRAVIS_PULL_REQUEST == "false" && test $TRAVIS_BRANCH == "staging" && export SSHPASS=$DEPLOY_PASS
- test $TRAVIS_PULL_REQUEST == "false" && test $TRAVIS_BRANCH == "staging" && sshpass -e scp -o StrictHostKeyChecking=no package.tgz $DEPLOY_USER@$DEPLOY_STAGING_HOST:$DEPLOY_PATH
- test $TRAVIS_PULL_REQUEST == "false" && test $TRAVIS_BRANCH == "staging" && sshpass -e ssh $DEPLOY_USER@$DEPLOY_STAGING_HOST $DEPLOY_PATH/deploy-design-system.sh
notifications:
  slack:
    secure: pnmMkbxQt0rbioJRwL64lGEoryRqWDH0If4oCssVAP6+k+5h3CDMCeINpfkFhG3Oqro0pKVQnFjiXhDGTInFGX2cTjNm6khyOb0E4q1uRbEBJ2P4xWrfnLcjwq8JTszB1P78yXB/NkuWK2ZmTXWjFYw0FtLOgklvNzjARzxGQEzBn6LrcTmWGy/fxq2E0GdGNQ6xPFJt0Eof9+6Z7aoFUGpobZWHneqrR0yGSPO/CLLxB88jWOuMQLwrgGg3Ua/u/HLgNpdq6h5RhVh25PGZa+MB9pdXRRqbR5FuTIA5uxmG0lAemlcynonPDOvh1bUGKh0z0bhUJC54Nufe+pib2s2ySll+R/rHYdqp6qJ9p6VuMjwezdMq8OAmFKPzsA5isVj1MTW4qxja5zfsIWeRE558kHSvlTxu0MwUqdfM8CuBppUfJZ7QQ1lGpaeLsfJfHxbJbvUi6XeNnf+ffoYsCTKKfxA0JzcReLC5cq25nqMxC/dEEH4RY3VC519tdjjZDc+fYA8e2pO6QUbdXsUnnwOXBleKt1n556c7MWguAcaCwnifJrSFHC8GVPX4L61Ta75ul8TcuNQIMkY5DAgsUYg5+OnWfM2bu1p8kiGc8TthVtezJe5AfXxoLQBZQQdtX/uovCVZiUjaafpmapNGcMwhHIDmbPWwM7JdQgs8eH4=
